<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Contact Manager</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"
      integrity="sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="/javascripts/main.js" defer="true"></script>
  </head>
  <body id="body">
    <header>
      <h1 class="searchPhase">
        Ugly Contacts Manager
      </h1>
    </header>
    <form
      id="searchAndEntry"
      name="searchAndEntry"
      class="searchPhase"
      method="POST"
      action="/addContact"
    >
      <div>
        <input type="submit" name="addContact" value="Add Contact" />
      </div>
      <div>
        <input
          id="searchField"
          type="text"
          name="search"
          placeholder="Search"
        />
      </div>
    </form>
    
    <div id="contactContainer" class="searchPhase"></div>

    <div id="add_contact_div"  class="addPhase" style="display: none">
      <form id="add_contact_form" name="addContact" method="POST" action="/addContact">
        <div>
          <label for="full_name">Name:  </label>
          <input type="text" id="full_name" name="full_name">
        </div>
        <div>
          <label for="phone_number">Phone: </label>
          <input type="text" id="phone_number" name="phone_number">
        </div>
        <div>
          <label for="email">Email:  </label>
          <input type="text" id="email" name="email">
        </div>
        <div id="contact_tags"></div>
        <div>
          <button id="cancel_add">Cancel</button>
          <input type="submit" value="Add Contact">
        </div>
      </form>
    </div>

    <script id="contact_tags_template" type="text/x-handlebars">
      {{#if tags}}
      <label for="tags_list">Tags: </label>
      <ul id="tags_list" style="list-style: none">
        {{#each tags}}
        <li>
          <input type="checkbox" id="tag_{{this}}" name="{{this}}" value="{{this}}">
          <label for="tag_{{this}}">{{this}}</label>
        </li>
        {{/each}}
      </ul>
      {{/if}}
      <div>
        <label for="new_tag">New Tag: </label>
        <input type="text" id="new_tag" name="new_tag">
      </div>
    </script>


    <script id="contact_list" type="text/x-handlebars">
      <ul style="list-style: none">
        {{#each contacts}}
        {{> contact_partial}}
        {{/each}}
      <ul>
    </script>

    <script id="contact_partial" type="text/x-handlebars">
      <li>
        <fieldset style="border: solid black 1px">
          <div>
            <h3>{{full_name}}</h3>
          </div>
          <div>
            <p>
              <strong>Phone number:</strong>
              {{phone_number}}
            </p>
          </div>
          <div>
            <strong>Email:</strong>
            {{email}}
          </div>
          {{#if tags}}
          <div>
            <p>
              <strong>Tags:</strong>
              {{#each (splitTags tags)}}
              <a href='#'>{{this}}<a>
              {{/each}}
            </p>
          </div>
          {{/if}}
          <div>
          </div>
        <div>
          <button id="edit{{id}}">Edit</button>
          <button id="delete{{id}}">Delete</button>
        </div>
        </fieldset>
      </li>
  </body>
</html>
